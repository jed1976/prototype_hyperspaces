var r=Array.isArray;function n(r){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function t(r){return function(r){if(Array.isArray(r))return e(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,n){if(!r)return;if("string"==typeof r)return e(r,n);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(r);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return e(r,n)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=new Array(n);t<n;t++)e[t]=r[t];return e}function o(t){return"object"===n(t)&&null!==t&&!r(t)&&1===Object.keys(t).length}function u(r){return Object.keys(r)[0]}function i(r,n){var t=void 0===n?null:n,e=this;if(void 0===r||""===r||null===r)return e;for(var o=String(r).split("."),u=0;u<o.length;u++){if(null===e)return t;if(void 0===(e=e[o[u]]))return t}return e}function f(n){for(var t=[],e=arguments.length,o=new Array(e>1?e-1:0),u=1;u<e;u++)o[u-1]=arguments[u];for(var i=r(o[0])?o[0]:o,f=0;f<i.length;f++){var a=i[f],c=n({var:a},this);null!==c&&""!==c||t.push(a)}return t}function a(r,n,t){var e=r({missing:t},this);return t.length-e.length>=n?[]:e}function c(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.reduce((function(r,n){return parseFloat(r,10)+parseFloat(n,10)}),0)}function l(r,n){return r/n}function p(r,n){return r%n}function s(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.reduce((function(r,n){return parseFloat(r,10)*parseFloat(n,10)}),1)}function v(r,n){return void 0===n?-r:r-n}function d(n){return(!r(n)||0!==n.length)&&!!n}function h(r,n,t){var e=r(t[0],n),o=t[1];if(!e.length)return!1;for(var u=0;u<e.length;u+=1)if(!d(r(o,e[u])))return!1;return!0}function y(n,t,e){var o=n(e[0],t),u=e[1];return r(o)?o.filter((function(r){return d(n(u,r))})):[]}function g(n,t,e){var o=n(e[0],t),u=e[1];return r(o)?o.map((function(r){return n(u,r)})):[]}function m(r,n,t){return 0===r({filter:t},n).length}function b(n,t,e){var o=n(e[0],t),u=e[1],i=void 0!==e[2]?e[2]:null;return r(o)?o.reduce((function(r,t){return n(u,{current:t,accumulator:r})}),i):i}function A(r,n,t){return r({filter:t},n).length>0}function w(r,n,t){for(var e,o=0;o<t.length;o++)if(!d(e=r(t[o],n)))return e;return e}function F(r,n,t){var e;for(e=0;e<t.length-1;e+=2)if(d(r(t[e],n)))return r(t[e+1],n);return t.length===e+1?r(t[e],n):null}function S(r,n){return r==n}function E(r){return!d(r)}function O(r,n){return r!=n}function _(r,n,t){for(var e,o=0;o<t.length;o++)if(d(e=r(t[o],n)))return e;return e}function j(r,n){return r===n}function x(r,n){return r!==n}function q(r,n){return!(!n||void 0===n.indexOf)&&-1!==n.indexOf(r)}function M(r,n){return r>n}function k(r,n){return r>=n}function z(r,n,t){return void 0===t?r<n:r<n&&n<t}function I(r,n,t){return void 0===t?r<=n:r<=n&&n<=t}function U(r){return r[u(r)]}i.op="var",f.withApply=!0,a.withApply=!0,c.op="+",l.op="/",p.op="%",s.op="*",v.op="-",h.deepFirst=!1,y.deepFirst=!1,g.deepFirst=!1,m.deepFirst=!1,b.deepFirst=!1,A.deepFirst=!1,w.deepFirst=!1,F.op=["if","?:"],F.deepFirst=!1,S.op="==",E.op="!",O.op="!=",d.op="!!",_.deepFirst=!1,j.op="===",x.op="!==",q.op="in",M.op=">",k.op=">=",z.op="<",I.op="<=";var C=function(n){var t={};function e(n,o){r(n)?n.forEach((function(r){return e(r,o)})):t[n]=o}return n&&Object.keys(n).forEach((function(r){var t=n[r];e(t.op||r,t)})),{apply:function n(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(e))return e.map((function(r){return n(r,i)}));if(!o(e))return e;var f,a=u(e),c=e[a];r(c)||(c=[c]);var l=t[a];if("function"==typeof l){var p=l.deepFirst,s=void 0===p||p;if(!s)return l(n,i,c)}if(c=c.map((function(r){return n(r,i)})),"function"==typeof l){var v=l.withApply;return v&&c.unshift(n),l.apply(i,c)}if(a.indexOf(".")>0){var d=String(a).split("."),h=t;for(f=0;f<d.length;f++)if(void 0===(h=h[d[f]]))throw new Error("Unrecognized operation ".concat(a," (failed at ").concat(d.slice(0,f+1).join("."),")"));return h.apply(i,c)}throw new Error("Unrecognized operation ".concat(a))},add_operation:e,rm_operation:function n(e){r(e)?e.forEach((function(r){return n(r)})):delete t[e]}}}(Object.freeze({__proto__:null,variable:i,missing:f,missing_some:a,add:c,divide:l,modulo:p,multiply:s,subtract:v,all:h,filter:y,map:g,merge:function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.reduce((function(r,n){return r.concat(n)}),[])},none:m,reduce:b,some:A,and:w,condition:F,equal:S,not:E,notEqual:O,notnot:d,or:_,strictEqual:j,strictNotEqual:x,indexOf:q,log:function(r){return console.log(r),r},method:function(r,n,t){return r[n].apply(r,t)},greater:M,greaterEqual:k,less:z,lessEqual:I,max:function(){return Math.max.apply(Math,arguments)},min:function(){return Math.min.apply(Math,arguments)},cat:function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.join("")},substr:function(r,n,t){if(t<0){var e=String(r).substr(n);return e.substr(0,e.length+t)}return String(r).substr(n,t)}}));C.is_logic=o,C.truthy=d,C.get_operator=u,C.get_values=U,C.uses_data=function n(e){var i=[];if(o(e)){var f=u(e),a=e[f];r(a)||(a=[a]),"var"===f?i.push(a[0]):a.forEach((function(r){i.push.apply(i,t(n(r)))}))}return function(r){for(var n=[],t=0,e=r.length;t<e;t++)-1===n.indexOf(r[t])&&n.push(r[t]);return n}(i)},C.rule_like=function n(t,e){if(e===t)return!0;if("@"===e)return!0;if("number"===e)return"number"==typeof t;if("string"===e)return"string"==typeof t;if("array"===e)return r(t)&&!o(t);if(o(e)){if(o(t)){var i=u(e),f=u(t);if("@"===i||i===f)return n(U(t),U(e))}return!1}if(r(e)){if(r(t)){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a+=1)if(!n(t[a],e[a]))return!1;return!0}return!1}return!1};export default C;
//# sourceMappingURL=json_logic.esm.min.js.map
